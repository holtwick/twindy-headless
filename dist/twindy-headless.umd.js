var __assign=Object.assign;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["twindy-headless"]={},e.Vue)}(this,(function(e,t){"use strict";var o=t.defineComponent({name:"tw-symbol",props:{name:{type:String,default:0,required:!0}}});o.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("i",{class:"f7","data-f7-icon":e.name,"aria-hidden":"true"},null,8,["data-f7-icon"])};const n=t.defineComponent({components:{TwSymbol:o},props:{title:{type:String,default:""},theme:{default:"primary"},symbol:{type:String},symbolLeft:{type:String},symbolRight:{type:String},role:{type:String,default:"button",validator:e=>["button","link"].includes(e)},active:{type:Boolean,default:!1},passive:{type:Boolean,default:!1}},data:()=>({disabled:!1,tooltipInstance:null,hoverCount:0}),computed:{slotted(){var e,t;return this.title||null!=(null==(t=null==(e=this.$slots)?void 0:e.default)?void 0:t[0])},classnames(){return{[`tw-${this.role}`]:!0,[`-${this.theme}`]:!0,"-active":!0===this.active,"-has-title":this.slotted}}},emits:["click","action","update:active"],methods:{async doAction(e){if(!this.disabled){this.disabled=!0;try{await this.$nextTick(),this.$emit("click",e),this.$emit("action",e),this.$emit("update:active",!this.active),e.waitUntil&&await e.waitUntil}catch(t){}this.disabled=!1}},async doClick(e){this.passive||await this.doAction(e)},async doBeforeClick(e){this.passive&&(e.preventDefault(),await this.doAction(e))}}});n.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-symbol");return t.openBlock(),t.createBlock("button",t.mergeProps(e.$attrs,{disabled:e.disabled,role:e.role,tabindex:e.disabled?"0":void 0,onMousedown:o[1]||(o[1]=(...t)=>e.doBeforeClick&&e.doBeforeClick(...t)),onClick:o[2]||(o[2]=(...t)=>e.doClick&&e.doClick(...t)),onContextmenu:o[3]||(o[3]=(...t)=>e.doClick&&e.doClick(...t))}),[e.symbol||e.symbolLeft?(t.openBlock(),t.createBlock(l,{key:0,name:e.symbol||e.symbolLeft,class:"tw-button-symbol-left"},null,8,["name"])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(e.title)+" ",1),t.renderSlot(e.$slots,"default"),e.symbolRight?(t.openBlock(),t.createBlock(l,{key:1,name:e.symbolRight,class:"tw-button-symbol-right"},null,8,["name"])):t.createCommentVNode("",!0)],16,["disabled","role","tabindex"])};let r;const i={beforeMount:(e,{value:t=!0})=>{t&&e&&(r=t=>{const o=(n=e)?Array.from(n.querySelectorAll("\n    a[href],\n    area[href],\n    input:not([disabled]),\n    select:not([disabled]),\n    textarea:not([disabled]),\n    button:not([disabled]),\n    iframe,\n    object,\n    embed,\n    *[tabindex],\n    *[contenteditable]\n    ".trim())||[]):[];var n;let r=document.querySelector(":focus"),i=o.findIndex((e=>e.isSameNode(r))),a=o.length;"Tab"===t.key&&(t.preventDefault(),t.shiftKey?(--i,i<=0&&(i=a-1)):(++i,i>=a&&(i=0)),o[i].focus())},e.addEventListener("keydown",r))},unMount:e=>{null==e||e.removeEventListener("keydown",r)}};var a=t.defineComponent({name:"tw-link",components:{TwButton:n}});function l(e,o,n={ignoreInputElements:!0}){let r=t=>{console.log("key",e,null==n?void 0:n.ignoreInputElements,t.key);let r=t.target.tagName;if(console.log("key match",e),t.key===e){!0===(!0===(null==n?void 0:n.ignoreInputElements))&&["INPUT","TEXTAREA"].includes(r)||o(t),t.preventDefault(),t.stopPropagation()}};t.onMounted((()=>{window.addEventListener("keydown",r)})),t.onBeforeUnmount((()=>{window.removeEventListener("keydown",r)}))}a.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-button");return t.openBlock(),t.createBlock(l,t.mergeProps({role:"link"},e.$attrs),{default:t.withCtx((()=>[t.renderSlot(e.$slots,"default")])),_:3},16)};var s=t.defineComponent({components:{TwSymbol:o,TwLink:a},props:{modelValue:{type:[Boolean,Object],default:!1},title:{type:String,default:""},close:{type:Boolean,default:!0},role:{default:"dialog"},canCancel:{type:Boolean,default:!0},onCancel:{type:Function,default:()=>{}}},directives:{trapFocus:i},emits:["close","update:modelValue","didOpen","willClose","didClose","cancel"],setup(e,{emit:o}){console.log("setup");let n=t.ref();const r={doCancel(){o("cancel"),r.doClose()},doClose(){o("close",!1),o("update:modelValue",!1)},doFocus(){var e,t;null==(t=null==(e=n.value)?void 0:e.querySelector(".focus"))||t.focus()},didAppear(){console.log("did appear"),r.doFocus(),o("didOpen")}};return l("Escape",r.doCancel,{ignoreInputElements:!1}),__assign(__assign({},r),{root:n})}});const c={class:"tw-modal-container"},d={key:0,class:"tw-modal-header header"},u={class:"tw-modal-title title"},p=t.createVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},[t.createVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.createVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),f={class:"tw-modal-body body"},m={class:"tw-modal-footer footer"};s.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-link"),s=t.resolveDirective("trap-focus");return t.openBlock(),t.createBlock(t.Transition,{name:"tw-modal-animation",onAfterLeave:o[2]||(o[2]=()=>{}),onAfterEnter:e.didAppear,appear:""},{default:t.withCtx((()=>[e.modelValue?t.withDirectives((t.openBlock(),t.createBlock("div",{key:0,class:["tw-modal",{active:!!e.modelValue}],tabindex:-1,"aria-modal":"true",role:e.role,ref:"root"},[t.createVNode("a",{onClick:o[1]||(o[1]=(...t)=>e.doCancel&&e.doCancel(...t)),class:"tw-modal-overlay overlay","aria-label":"Close"}),t.createVNode("div",c,[e.title||e.close?(t.openBlock(),t.createBlock("header",d,[t.createVNode("div",u,[t.renderSlot(e.$slots,"title",{},(()=>[t.createTextVNode(t.toDisplayString(e.title),1)]))]),e.close?(t.openBlock(),t.createBlock(l,{key:0,tooltip:"Close",onClick:e.doCancel,class:"tw-modal-close",symbol:"xmark"},{default:t.withCtx((()=>[p])),_:1},8,["onClick"])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0),t.createVNode("section",f,[t.renderSlot(e.$slots,"default")]),t.createVNode("footer",m,[t.renderSlot(e.$slots,"footer")])])],10,["role"])),[[s]]):t.createCommentVNode("",!0)])),_:1},8,["onAfterEnter"])};var v=t.defineComponent({props:{items:{type:Array,default:()=>[]},selected:{type:[String,Number],default:0}},emits:["selected"],setup:(e,{emit:t})=>__assign({},{doAction(e){console.log("item selected",e),t("selected",e)}})});const h={class:"tw-items",ref:"$container"},g=t.createTextVNode("Empty");v.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("div",h,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(e.items,((o,n)=>(t.openBlock(),t.createBlock("div",{key:o.id,"data-id":o.id,"data-index":n,onMousedown:t=>e.doAction(o),onKeydown:t.withKeys((t=>e.doAction(o)),["enter"]),class:["tw-items-item",{"-selected":e.selected===n||e.selected===o._id}]},[t.renderSlot(e.$slots,"default",{item:o,index:n},(()=>[t.createTextVNode(t.toDisplayString(n)+". "+t.toDisplayString(o),1)]))],42,["data-id","data-index","onMousedown","onKeydown"])))),128)),e.items.length<=0?t.renderSlot(e.$slots,"empty",{key:0},(()=>[g])):t.createCommentVNode("",!0)],512)};const y=t.defineComponent({name:"tw-list",props:{distance:{type:Number,default:50},scrollable:{type:Boolean,default:!0}},data:()=>({count:0,loading:!1}),mounted(){this.doMore()},methods:{doMore(){this.$emit("load",{start:0,end:this.distance})},onScroll(e){const t=e.target.scrollTop,o=e.target.clientHeight,n=.75*+o;o+t>=e.target.scrollHeight-n&&this.doMore(!1)}}});y.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("div",{class:["tw-list",{"-scrollable":e.scrollable}],onScroll:o[1]||(o[1]=(...t)=>e.onScroll&&e.onScroll(...t))},[t.renderSlot(e.$slots,"default")],34)};var w="top",b="bottom",k="right",x="left",B="auto",O=[w,b,k,x],S="start",C="end",V="viewport",N="popper",D=O.reduce((function(e,t){return e.concat([t+"-"+S,t+"-"+C])}),[]),T=[].concat(O,[B]).reduce((function(e,t){return e.concat([t,t+"-"+S,t+"-"+C])}),[]),j=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function E(e){return e?(e.nodeName||"").toLowerCase():null}function A(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function L(e){return e instanceof A(e).Element||e instanceof Element}function M(e){return e instanceof A(e).HTMLElement||e instanceof HTMLElement}function P(e){return"undefined"!=typeof ShadowRoot&&(e instanceof A(e).ShadowRoot||e instanceof ShadowRoot)}var $={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var o=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];M(r)&&E(r)&&(Object.assign(r.style,o),Object.keys(n).forEach((function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],r=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:o[e]).reduce((function(e,t){return e[t]="",e}),{});M(n)&&E(n)&&(Object.assign(n.style,i),Object.keys(r).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};function _(e){return e.split("-")[0]}function I(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function R(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&P(o)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function W(e){return A(e).getComputedStyle(e)}function F(e){return["table","td","th"].indexOf(E(e))>=0}function z(e){return((L(e)?e.ownerDocument:e.document)||window.document).documentElement}function H(e){return"html"===E(e)?e:e.assignedSlot||e.parentNode||(P(e)?e.host:null)||z(e)}function U(e){return M(e)&&"fixed"!==W(e).position?e.offsetParent:null}function q(e){for(var t=A(e),o=U(e);o&&F(o)&&"static"===W(o).position;)o=U(o);return o&&("html"===E(o)||"body"===E(o)&&"static"===W(o).position)?t:o||function(e){for(var t=navigator.userAgent.toLowerCase().includes("firefox"),o=H(e);M(o)&&["html","body"].indexOf(E(o))<0;){var n=W(o);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return o;o=o.parentNode}return null}(e)||t}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var G=Math.max,X=Math.min,Y=Math.round;function J(e,t,o){return G(e,X(t,o))}function Q(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Z(e,t){return t.reduce((function(t,o){return t[o]=e,t}),{})}var ee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function te(e){var t,o=e.popper,n=e.popperRect,r=e.placement,i=e.offsets,a=e.position,l=e.gpuAcceleration,s=e.adaptive,c=e.roundOffsets,d=!0===c?function(e){var t=e.x,o=e.y,n=window.devicePixelRatio||1;return{x:Y(Y(t*n)/n)||0,y:Y(Y(o*n)/n)||0}}(i):"function"==typeof c?c(i):i,u=d.x,p=void 0===u?0:u,f=d.y,m=void 0===f?0:f,v=i.hasOwnProperty("x"),h=i.hasOwnProperty("y"),g=x,y=w,B=window;if(s){var O=q(o),S="clientHeight",C="clientWidth";O===A(o)&&"static"!==W(O=z(o)).position&&(S="scrollHeight",C="scrollWidth"),r===w&&(y=b,m-=O[S]-n.height,m*=l?1:-1),r===x&&(g=k,p-=O[C]-n.width,p*=l?1:-1)}var V,N=Object.assign({position:a},s&&ee);return l?Object.assign({},N,((V={})[y]=h?"0":"",V[g]=v?"0":"",V.transform=(B.devicePixelRatio||1)<2?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",V)):Object.assign({},N,((t={})[y]=h?m+"px":"",t[g]=v?p+"px":"",t.transform="",t))}var oe={passive:!0};var ne={left:"right",right:"left",bottom:"top",top:"bottom"};function re(e){return e.replace(/left|right|bottom|top/g,(function(e){return ne[e]}))}var ie={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return ie[e]}))}function le(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function se(e){var t=A(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ce(e){return le(z(e)).left+se(e).scrollLeft}function de(e){var t=W(e),o=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+r+n)}function ue(e){return["html","body","#document"].indexOf(E(e))>=0?e.ownerDocument.body:M(e)&&de(e)?e:ue(H(e))}function pe(e,t){var o;void 0===t&&(t=[]);var n=ue(e),r=n===(null==(o=e.ownerDocument)?void 0:o.body),i=A(n),a=r?[i].concat(i.visualViewport||[],de(n)?n:[]):n,l=t.concat(a);return r?l:l.concat(pe(H(a)))}function fe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function me(e,t){return t===V?fe(function(e){var t=A(e),o=z(e),n=t.visualViewport,r=o.clientWidth,i=o.clientHeight,a=0,l=0;return n&&(r=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=n.offsetLeft,l=n.offsetTop)),{width:r,height:i,x:a+ce(e),y:l}}(e)):M(t)?function(e){var t=le(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):fe(function(e){var t,o=z(e),n=se(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=G(o.scrollWidth,o.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=G(o.scrollHeight,o.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-n.scrollLeft+ce(e),s=-n.scrollTop;return"rtl"===W(r||o).direction&&(l+=G(o.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:s}}(z(e)))}function ve(e,t,o){var n="clippingParents"===t?function(e){var t=pe(H(e)),o=["absolute","fixed"].indexOf(W(e).position)>=0&&M(e)?q(e):e;return L(o)?t.filter((function(e){return L(e)&&R(e,o)&&"body"!==E(e)})):[]}(e):[].concat(t),r=[].concat(n,[o]),i=r[0],a=r.reduce((function(t,o){var n=me(e,o);return t.top=G(n.top,t.top),t.right=X(n.right,t.right),t.bottom=X(n.bottom,t.bottom),t.left=G(n.left,t.left),t}),me(e,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function he(e){return e.split("-")[1]}function ge(e){var t,o=e.reference,n=e.element,r=e.placement,i=r?_(r):null,a=r?he(r):null,l=o.x+o.width/2-n.width/2,s=o.y+o.height/2-n.height/2;switch(i){case w:t={x:l,y:o.y-n.height};break;case b:t={x:l,y:o.y+o.height};break;case k:t={x:o.x+o.width,y:s};break;case x:t={x:o.x-n.width,y:s};break;default:t={x:o.x,y:o.y}}var c=i?K(i):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case S:t[c]=t[c]-(o[d]/2-n[d]/2);break;case C:t[c]=t[c]+(o[d]/2-n[d]/2)}}return t}function ye(e,t){void 0===t&&(t={});var o=t,n=o.placement,r=void 0===n?e.placement:n,i=o.boundary,a=void 0===i?"clippingParents":i,l=o.rootBoundary,s=void 0===l?V:l,c=o.elementContext,d=void 0===c?N:c,u=o.altBoundary,p=void 0!==u&&u,f=o.padding,m=void 0===f?0:f,v=Q("number"!=typeof m?m:Z(m,O)),h=d===N?"reference":N,g=e.elements.reference,y=e.rects.popper,x=e.elements[p?h:d],B=ve(L(x)?x:x.contextElement||z(e.elements.popper),a,s),S=le(g),C=ge({reference:S,element:y,strategy:"absolute",placement:r}),D=fe(Object.assign({},y,C)),T=d===N?D:S,j={top:B.top-T.top+v.top,bottom:T.bottom-B.bottom+v.bottom,left:B.left-T.left+v.left,right:T.right-B.right+v.right},E=e.modifiersData.offset;if(d===N&&E){var A=E[r];Object.keys(j).forEach((function(e){var t=[k,b].indexOf(e)>=0?1:-1,o=[w,b].indexOf(e)>=0?"y":"x";j[e]+=A[o]*t}))}return j}function we(e,t,o){return void 0===o&&(o={x:0,y:0}),{top:e.top-t.height-o.y,right:e.right-t.width+o.x,bottom:e.bottom-t.height+o.y,left:e.left-t.width-o.x}}function be(e){return[w,k,b,x].some((function(t){return e[t]>=0}))}function ke(e,t,o){void 0===o&&(o=!1);var n,r,i=z(t),a=le(e),l=M(t),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(l||!l&&!o)&&(("body"!==E(t)||de(i))&&(s=(n=t)!==A(n)&&M(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:se(n)),M(t)?((c=le(t)).x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=ce(i))),{x:a.left+s.scrollLeft-c.x,y:a.top+s.scrollTop-c.y,width:a.width,height:a.height}}function xe(e){var t=new Map,o=new Set,n=[];function r(e){o.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!o.has(e)){var n=t.get(e);n&&r(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){o.has(e.name)||r(e)})),n}var Be={placement:"bottom",modifiers:[],strategy:"absolute"};function Oe(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Se(e){void 0===e&&(e={});var t=e,o=t.defaultModifiers,n=void 0===o?[]:o,r=t.defaultOptions,i=void 0===r?Be:r;return function(e,t,o){void 0===o&&(o=i);var r,a,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Be,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],c=!1,d={state:l,setOptions:function(o){u(),l.options=Object.assign({},i,l.options,o),l.scrollParents={reference:L(e)?pe(e):e.contextElement?pe(e.contextElement):[],popper:pe(t)};var r,a,c=function(e){var t=xe(e);return j.reduce((function(e,o){return e.concat(t.filter((function(e){return e.phase===o})))}),[])}((r=[].concat(n,l.options.modifiers),a=r.reduce((function(e,t){var o=e[t.name];return e[t.name]=o?Object.assign({},o,t,{options:Object.assign({},o.options,t.options),data:Object.assign({},o.data,t.data)}):t,e}),{}),Object.keys(a).map((function(e){return a[e]}))));return l.orderedModifiers=c.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,o=e.options,n=void 0===o?{}:o,r=e.effect;if("function"==typeof r){var i=r({state:l,name:t,instance:d,options:n}),a=function(){};s.push(i||a)}})),d.update()},forceUpdate:function(){if(!c){var e=l.elements,t=e.reference,o=e.popper;if(Oe(t,o)){l.rects={reference:ke(t,q(o),"fixed"===l.options.strategy),popper:I(o)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<l.orderedModifiers.length;n++)if(!0!==l.reset){var r=l.orderedModifiers[n],i=r.fn,a=r.options,s=void 0===a?{}:a,u=r.name;"function"==typeof i&&(l=i({state:l,options:s,name:u,instance:d})||l)}else l.reset=!1,n=-1}}},update:(r=function(){return new Promise((function(e){d.forceUpdate(),e(l)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(r())}))}))),a}),destroy:function(){u(),c=!0}};if(!Oe(e,t))return d;function u(){s.forEach((function(e){return e()})),s=[]}return d.setOptions(o).then((function(e){!c&&o.onFirstUpdate&&o.onFirstUpdate(e)})),d}}var Ce=Se({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,o=e.instance,n=e.options,r=n.scroll,i=void 0===r||r,a=n.resize,l=void 0===a||a,s=A(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",o.update,oe)})),l&&s.addEventListener("resize",o.update,oe),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",o.update,oe)})),l&&s.removeEventListener("resize",o.update,oe)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,o=e.name;t.modifiersData[o]=ge({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,o=e.options,n=o.gpuAcceleration,r=void 0===n||n,i=o.adaptive,a=void 0===i||i,l=o.roundOffsets,s=void 0===l||l,c={placement:_(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,te(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,te(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},$,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,o=e.options,n=e.name,r=o.offset,i=void 0===r?[0,0]:r,a=T.reduce((function(e,o){return e[o]=function(e,t,o){var n=_(e),r=[x,w].indexOf(n)>=0?-1:1,i="function"==typeof o?o(Object.assign({},t,{placement:e})):o,a=i[0],l=i[1];return a=a||0,l=(l||0)*r,[x,k].indexOf(n)>=0?{x:l,y:a}:{x:a,y:l}}(o,t.rects,i),e}),{}),l=a[t.placement],s=l.x,c=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,o=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=o.mainAxis,i=void 0===r||r,a=o.altAxis,l=void 0===a||a,s=o.fallbackPlacements,c=o.padding,d=o.boundary,u=o.rootBoundary,p=o.altBoundary,f=o.flipVariations,m=void 0===f||f,v=o.allowedAutoPlacements,h=t.options.placement,g=_(h),y=s||(g===h||!m?[re(h)]:function(e){if(_(e)===B)return[];var t=re(e);return[ae(e),t,ae(t)]}(h)),C=[h].concat(y).reduce((function(e,o){return e.concat(_(o)===B?function(e,t){void 0===t&&(t={});var o=t,n=o.placement,r=o.boundary,i=o.rootBoundary,a=o.padding,l=o.flipVariations,s=o.allowedAutoPlacements,c=void 0===s?T:s,d=he(n),u=d?l?D:D.filter((function(e){return he(e)===d})):O,p=u.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=u);var f=p.reduce((function(t,o){return t[o]=ye(e,{placement:o,boundary:r,rootBoundary:i,padding:a})[_(o)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:o,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:v}):o)}),[]),V=t.rects.reference,N=t.rects.popper,j=new Map,E=!0,A=C[0],L=0;L<C.length;L++){var M=C[L],P=_(M),$=he(M)===S,I=[w,b].indexOf(P)>=0,R=I?"width":"height",W=ye(t,{placement:M,boundary:d,rootBoundary:u,altBoundary:p,padding:c}),F=I?$?k:x:$?b:w;V[R]>N[R]&&(F=re(F));var z=re(F),H=[];if(i&&H.push(W[P]<=0),l&&H.push(W[F]<=0,W[z]<=0),H.every((function(e){return e}))){A=M,E=!1;break}j.set(M,H)}if(E)for(var U=function(e){var t=C.find((function(t){var o=j.get(t);if(o)return o.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},q=m?3:1;q>0;q--){if("break"===U(q))break}t.placement!==A&&(t.modifiersData[n]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,o=e.options,n=e.name,r=o.mainAxis,i=void 0===r||r,a=o.altAxis,l=void 0!==a&&a,s=o.boundary,c=o.rootBoundary,d=o.altBoundary,u=o.padding,p=o.tether,f=void 0===p||p,m=o.tetherOffset,v=void 0===m?0:m,h=ye(t,{boundary:s,rootBoundary:c,padding:u,altBoundary:d}),g=_(t.placement),y=he(t.placement),B=!y,O=K(g),C="x"===O?"y":"x",V=t.modifiersData.popperOffsets,N=t.rects.reference,D=t.rects.popper,T="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,j={x:0,y:0};if(V){if(i||l){var E="y"===O?w:x,A="y"===O?b:k,L="y"===O?"height":"width",M=V[O],P=V[O]+h[E],$=V[O]-h[A],R=f?-D[L]/2:0,W=y===S?N[L]:D[L],F=y===S?-D[L]:-N[L],z=t.elements.arrow,H=f&&z?I(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Y=U[E],Q=U[A],Z=J(0,N[L],H[L]),ee=B?N[L]/2-R-Z-Y-T:W-Z-Y-T,te=B?-N[L]/2+R+Z+Q+T:F+Z+Q+T,oe=t.elements.arrow&&q(t.elements.arrow),ne=oe?"y"===O?oe.clientTop||0:oe.clientLeft||0:0,re=t.modifiersData.offset?t.modifiersData.offset[t.placement][O]:0,ie=V[O]+ee-re-ne,ae=V[O]+te-re;if(i){var le=J(f?X(P,ie):P,M,f?G($,ae):$);V[O]=le,j[O]=le-M}if(l){var se="x"===O?w:x,ce="x"===O?b:k,de=V[C],ue=de+h[se],pe=de-h[ce],fe=J(f?X(ue,ie):ue,de,f?G(pe,ae):pe);V[C]=fe,j[C]=fe-de}}t.modifiersData[n]=j}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,o=e.state,n=e.name,r=o.elements.arrow,i=o.modifiersData.popperOffsets,a=_(o.placement),l=K(a),s=[x,k].indexOf(a)>=0?"height":"width";if(r&&i){var c=o.modifiersData[n+"#persistent"].padding,d=I(r),u="y"===l?w:x,p="y"===l?b:k,f=o.rects.reference[s]+o.rects.reference[l]-i[l]-o.rects.popper[s],m=i[l]-o.rects.reference[l],v=q(r),h=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,g=f/2-m/2,y=c[u],B=h-d[s]-c[p],O=h/2-d[s]/2+g,S=J(y,O,B),C=l;o.modifiersData[n]=((t={})[C]=S,t.centerOffset=S-O,t)}},effect:function(e){var t=e.state,o=e.options,n=e.name,r=o.element,i=void 0===r?"[data-popper-arrow]":r,a=o.padding,l=void 0===a?0:a;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&R(t.elements.popper,i)&&(l="function"==typeof l?l(Object.assign({},t.rects,{placement:t.placement})):l,t.elements.arrow=i,t.modifiersData[n+"#persistent"]={padding:Q("number"!=typeof l?l:Z(l,O))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,o=e.name,n=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=ye(t,{elementContext:"reference"}),l=ye(t,{altBoundary:!0}),s=we(a,n),c=we(l,r,i),d=be(s),u=be(c);t.modifiersData[o]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]});const Ve="undefined"!=typeof window,Ne=()=>{};function De(e){t.getCurrentInstance()&&t.onUnmounted(e)}const Te=Ve?window:void 0,je=Ve?window.document:void 0;function Ee(...e){let o,n,r,i;if("string"==typeof e[0]?([n,r,i]=e,o=Te):[o,n,r,i]=e,!o)return;let a=Ne;const l=t.watch((()=>t.unref(o)),(e=>{a(),e&&(e.addEventListener(n,r,i),a=()=>{e.removeEventListener(n,r,i),a=Ne})}),{immediate:!0}),s=()=>{l(),a()};return De(s),s}function Ae(e,t={}){const{document:o=je}=t;o&&Ee(o,"keydown",(t=>{!(()=>{const{activeElement:e,body:t}=document;if(!e)return!1;if(e===t)return!1;switch(e.tagName){case"INPUT":case"TEXTAREA":return!0}return e.hasAttribute("contenteditable")})()&&(({keyCode:e,metaKey:t,ctrlKey:o,altKey:n})=>!(t||o||n)&&(e>=48&&e<=57||e>=96&&e<=105||e>=65&&e<=90))(t)&&e(t)}),{passive:!0})}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
  
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
  
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Le(e,o,n={}){const{window:r=Te}=n,i=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(n,["window"]);let a;const l=r&&"ResizeObserver"in r,s=()=>{a&&(a.disconnect(),a=void 0)},c=t.watch((()=>function(e){var o,n;const r=t.unref(e);return null!==(n=null===(o=r)||void 0===o?void 0:o.$el)&&void 0!==n?n:r}(e)),(e=>{s(),l&&r&&e&&(a=new r.ResizeObserver(o),a.observe(e,i))}),{immediate:!0,flush:"post"}),d=()=>{s(),c()};return De(d),{isSupported:l,stop:d}}var Me,Pe;(Pe=Me||(Me={})).UP="UP",Pe.RIGHT="RIGHT",Pe.DOWN="DOWN",Pe.LEFT="LEFT";let $e=1;function _e(){return"id-"+$e++}class Ie{constructor(e){this.box=e}getBoundingClientRect(){return this.box}get clientWidth(){return Math.abs(this.box.right-this.box.left)}get clientHeight(){return Math.abs(this.box.bottom-this.box.top)}}var Re=t.defineComponent({props:{modelValue:{type:Boolean,default:!1},target:{type:[Element,Boolean,Number],default:!1},transition:{type:String,default:"tw-popover-fade"},arrow:{type:Boolean,default:!0},placement:{default:"top"},theme:{default:"popover"},text:{default:""},offset:{default:()=>[0,8]}},emits:["update:modelValue"],setup(e,{emit:o}){let n,r,i=t.ref(),a=t.ref(_e());function l(){null!=n&&(n.destroy(),n=null)}return Ee(window,"mousedown",(t=>{var r,i;!0!==e.modelValue||(null==(r=null==e?void 0:e.target)?void 0:r.contains(t.target))||(null==(i=null==n?void 0:n.value)?void 0:i.contains(t.target))||o("update:modelValue",!1)})),t.onBeforeUnmount(l),t.watch([()=>e.modelValue,()=>e.target],(()=>{e.modelValue&&e.target?(l(),t.nextTick(),async function(){let o=e.target;if(null!=o&&(l(),await t.nextTick(),r=i.value,r)){let t;t=o instanceof Node?o:new Ie(o),n=Ce(t,r,{placement:e.placement,modifiers:[{name:"offset",options:{offset:e.offset}},{name:"preventOverflow",options:{boundariesElement:"window",padding:8}}]})}}()):l()})),{id:a,popover:i}}});Re.render=function(e,o){return t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.withDirectives(t.createVNode("div",{"data-transition":e.transition,class:["tw-popover",`-${e.theme}`],ref:"popover",id:e.id,"aria-hidden":!(e.modelValue&&e.target),draggable:"false"},[t.withDirectives(t.createVNode("div",{id:"arrow",class:["tw-popover-arrow",`-${e.theme}-arrow`],"data-popper-arrow":""},null,2),[[t.vShow,e.arrow]]),t.createVNode("div",{class:["tw-popover-inner",`-${e.theme}-inner`]},[t.createTextVNode(t.toDisplayString(e.text)+" ",1),t.renderSlot(e.$slots,"default")],2)],10,["data-transition","id","aria-hidden"]),[[t.vShow,e.modelValue&&e.target]])])};const We=t.defineComponent({components:{twItems:v,twPopover:Re},props:{uid:{type:String,default:_e()},items:{type:Array,default:[]},placeholder:{type:String,default:""},minSize:{type:[Number,String],default:32},filter:{type:String}},computed:{active(){return this.items.length&&this.focus}},emits:["filter","deleteLast","add","update:filter"],setup(e,{emit:o}){let n=t.ref(),r=t.ref(),i=t.ref(""),a=t.reactive({selected:0,itemCandidate:null,focus:!1}),l={resizeInput(){const t=r.value;let o=t.value.trim();t.style.width="1px",t.style.width=Math.max(+e.minSize,o?t.scrollWidth:0)+"px"},doInput(e){l.resizeInput()},doClear(){i.value="",o("filter","")},doMove(t){a.selected=Math.max(0,Math.min(e.items.length-1,a.selected+t))},doAddItem(e){console.log("add item",e.title,i.value),o("add",e),l.doClear()},doAddSelection(){const t=e.items[this.selected];l.doAddItem(t)},doDeleteLast(e){i.value||(e.preventDefault(),o("deleteLast"))}};return i.value=e.filter,t.watch(i,(()=>{o("filter",i.value)})),__assign(__assign(__assign({},l),t.toRefs(a)),{filterText:i,target:n,input:r})}}),Fe={class:"tw-completion-after"};We.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-items"),s=t.resolveComponent("tw-popover");return t.openBlock(),t.createBlock("div",{class:["tw-completion",{"-focus":e.focus}],ref:"target",onClick:o[11]||(o[11]=t=>e.input.focus())},[t.renderSlot(e.$slots,"before"),t.withDirectives(t.createVNode("input",{xtype:"text",ref:"input",id:e.uid,"onUpdate:modelValue":o[1]||(o[1]=t=>e.filterText=t),autocomplete:"off",placeholder:e.placeholder,onFocus:o[2]||(o[2]=t=>e.focus=!0),onBlur:o[3]||(o[3]=t=>e.focus=!1),onInput:o[4]||(o[4]=(...t)=>e.doInput&&e.doInput(...t)),onKeydown:[o[5]||(o[5]=t.withKeys(t.withModifiers((t=>e.doMove(1)),["prevent"]),["down"])),o[6]||(o[6]=t.withKeys(t.withModifiers((t=>e.doMove(-1)),["prevent"]),["up"])),o[7]||(o[7]=t.withKeys(((...t)=>e.doAddSelection&&e.doAddSelection(...t)),["enter"])),o[8]||(o[8]=t.withKeys(((...t)=>e.doClear&&e.doClear(...t)),["esc"])),o[9]||(o[9]=t.withKeys(((...t)=>e.doDeleteLast&&e.doDeleteLast(...t)),["backspace"]))],class:"tw-completion-input"},null,40,["id","placeholder"]),[[t.vModelText,e.filterText]]),t.createVNode("div",Fe,[t.renderSlot(e.$slots,"after",{class:"completion-after"})]),t.createVNode(s,{modelValue:e.active,"onUpdate:modelValue":o[10]||(o[10]=t=>e.active=t),target:e.target,placement:"bottom-start",arrow:!1,theme:"dropdown",offset:[0,2]},{default:t.withCtx((()=>[t.createVNode(l,{items:e.items,selected:e.selected,onSelected:e.doAddItem},{default:t.withCtx((({item:o})=>[t.renderSlot(e.$slots,"item",{item:o},(()=>[t.createTextVNode(t.toDisplayString(o),1)]))])),_:3},8,["items","selected","onSelected"]),t.renderSlot(e.$slots,"default")])),_:3},8,["modelValue","target"])],2)};var ze=t.defineComponent({components:{twCompletion:We},props:{modelValue:{type:Array},allTags:{type:Object}},emits:["update:modelValue","create"],setup(e,{emit:o}){let n=t.ref(""),r=t.computed((()=>(console.log("calc tags"),(e.modelValue||[]).map((t=>e.allTags[t]))))),i=t.ref(Object.values(e.allTags)),a={setTags(e=[]){o("update:modelValue",[...e])},doRemoveTag(t){a.setTags(function(e,t){if(e&&Array.isArray(e)){let o;for(;-1!==(o=e.indexOf(t));)e.splice(o,1);return e}return[]}(e.modelValue,t))},async handleSelection(t){if(console.log("add item",t),t.action){let e=t.value.toString().trim();e&&(console.log("add item title",e),o("create",e))}else t.id?a.setTags([...e.modelValue,t.id]):console.log("unknown item",t)},handleFilter(t){let o=t.trim();console.log("calc candidates",o);let n=o.toLowerCase(),r=!1,a=e.modelValue||[],l=Object.values(e.allTags).filter((e=>{if(!a.includes(e.id)){if(o){const t=e.title.toString().toLowerCase();return e.title===n&&(r=!0),t.indexOf(n)>=0}return!0}return!1}));o&&!r&&l.push({action:"create",value:o}),i.value=l},handleDeleteLast(){console.log("delete last");let t=e.modelValue;t.pop()&&a.setTags(t)}};return __assign(__assign({},a),{candidates:i,tags:r,filter:n})}});const He=t.createVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},[t.createVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.createVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Ue={key:0,class:"tw-tag-item-create"},qe=t.createTextVNode(" Create new tag "),Ke={key:1,class:"tw-tag-item"};ze.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-completion");return t.openBlock(),t.createBlock(l,{items:e.candidates,onAdd:e.handleSelection,onDeleteLast:e.handleDeleteLast,onFilter:e.handleFilter,class:"tw-tag-input",placeholder:"Add Tag","min-size":"120"},{before:t.withCtx((()=>[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(e.tags,(o=>(t.openBlock(),t.createBlock("span",{class:"tw-tag-field",key:o.id},[t.createTextVNode(t.toDisplayString(o.title)+" ",1),t.createVNode("span",{onClick:t.withModifiers((t=>e.doRemoveTag(o.id)),["prevent"]),class:"tw-tag-remove"},[He],8,["onClick"])])))),128))])),item:t.withCtx((({item:e})=>[e.action?(t.openBlock(),t.createBlock("span",Ue,[qe,t.createVNode("b",null,t.toDisplayString(e.value),1)])):(t.openBlock(),t.createBlock("span",Ke,t.toDisplayString(e.title),1))])),_:1},8,["items","onAdd","onDeleteLast","onFilter"])};var Ge=t.defineComponent({props:{resize:{type:Boolean,default:!1},typing:{type:Boolean,default:!1},minSize:{type:[Number,String],default:32},placeholder:{type:String,default:""}},setup(e){let o=t.ref(),n=0;if(e.typing&&Ae((()=>{var e;(null==(e=null==o?void 0:o.value)?void 0:e.active)||o.value.focus()})),e.resize){let r=()=>{const t=o.value;let r=t.value;t.style.width="1px",t.style.width=""===r&&n?Math.max(+e.minSize,n)+"px":Math.max(+e.minSize,r?t.scrollWidth:0)+"px"};t.onMounted((()=>{var t;let i=o.value;i.addEventListener("input",r),console.log(e.placeholder),""===i.value&&(null==(t=e.placeholder)?void 0:t.length)>0&&(i.style.width="1px",i.value=e.placeholder,n=i.scrollWidth,console.log(n),i.value=""),r()})),t.onBeforeUnmount((()=>{o.value.removeEventListener("input",r)}))}return{input:o}}});Ge.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("input",t.mergeProps({type:"text"},e.$attrs,{placeholder:e.placeholder,ref:"input"}),null,16,["placeholder"])};var Xe={components:{twPopover:Re},props:{title:{type:String,default:"Hello"}},setup(e){let o=t.ref(!1);return{target:t.ref(),active:o}}};const Ye=t.createTextVNode("Define #content");Xe.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-popover");return t.openBlock(),t.createBlock(t.Fragment,null,[t.createVNode("div",{ref:"target",style:{display:"inline-block"},onClick:o[1]||(o[1]=e=>r.active=!r.active)},[t.renderSlot(e.$slots,"default",{class:"tw-dropdown"})],512),t.createVNode(l,{arrow:"",modelValue:r.active,"onUpdate:modelValue":o[2]||(o[2]=e=>r.active=e),target:r.target,theme:"dropdown",transition:"tw-tooltip-transition"},{default:t.withCtx((()=>[t.createVNode("div",null,[t.renderSlot(e.$slots,"content",{},(()=>[Ye]))])])),_:3},8,["modelValue","target"])],64)};const Je={props:{value:{default:null}},computed:{obj(){return function(e){try{return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}catch(t){console.error("cloneObject error:",t)}}(this.value)},entries(){if(this.isObject){let e=Object.entries(this.obj);return e.sort(),e}return[]},isArray(){return Array.isArray(this.obj)},isObject(){return!Array.isArray(this.obj)&&"object"==typeof this.obj},isNull(){return null==this.value},isTrue(){return!0===this.value},isFalse(){return!1===this.value},isDate(){return this.obj instanceof Date},isNumber(){return"number"==typeof this.value},isString(){return"string"==typeof this.value}}},Qe={class:"tw-object"},Ze={key:0,class:"-null"},et={key:1,class:"-number"},tt={key:2,class:"-string"},ot={key:3,class:"-true"},nt={key:4,class:"-false"},rt={key:5,class:"-date"},it={key:6},at=t.createVNode("div",null,"[",-1),lt={key:0,class:"-comma"},st=t.createVNode("div",null,"]",-1),ct={key:7},dt={class:"-title"},ut={key:8};Je.render=function(e,o,n,r,i,a){const l=t.resolveComponent("_self");return t.openBlock(),t.createBlock("div",Qe,[a.isNull?(t.openBlock(),t.createBlock("div",Ze,"null")):a.isNumber?(t.openBlock(),t.createBlock("div",et,t.toDisplayString(n.value),1)):a.isString?(t.openBlock(),t.createBlock("div",tt,'"'+t.toDisplayString(n.value)+'"',1)):a.isTrue?(t.openBlock(),t.createBlock("div",ot,"true")):a.isFalse?(t.openBlock(),t.createBlock("div",nt,"false")):a.isDate?(t.openBlock(),t.createBlock("div",rt,t.toDisplayString(e.date),1)):a.isArray?(t.openBlock(),t.createBlock("div",it,[at,(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(a.obj,((e,o)=>(t.openBlock(),t.createBlock(l,{value:e,key:o},{default:t.withCtx((()=>[o!==a.obj.length-1?(t.openBlock(),t.createBlock("div",lt,t.toDisplayString(", "))):t.createCommentVNode("",!0)])),_:2},1032,["value"])))),128)),st])):a.isObject?(t.openBlock(),t.createBlock("table",ct,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(a.entries,(([e,o])=>(t.openBlock(),t.createBlock("tr",{key:e},[t.createVNode("th",null,[t.createVNode("div",dt,t.toDisplayString(e),1)]),t.createVNode("td",null,[t.createVNode(l,{value:o},null,8,["value"])])])))),128))])):(t.openBlock(),t.createBlock("div",ut,t.toDisplayString(n.value.toString()),1)),t.renderSlot(e.$slots,"default")])};var pt=t.defineComponent({props:{name:String}});const ft={key:0,preserveAspectRatio:"xMinYMin"},mt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"};pt.render=function(e,o,n,r,i,a){return e.name?(t.openBlock(),t.createBlock("svg",ft,[t.createVNode("use",{"xlink:href":`/sprites.svg#${e.name}`},null,8,["xlink:href"])])):(t.openBlock(),t.createBlock("svg",mt,[t.renderSlot(e.$slots,"default")]))};const vt={props:{label:{type:String,default:null}},data:()=>({id:_e()})},ht={class:"form-body"};vt.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("div",t.mergeProps({class:"form-group"},e.$attrs),[n.label?(t.openBlock(),t.createBlock("label",{key:0,for:i.id,class:"form-label"},t.toDisplayString(n.label),9,["for"])):t.createCommentVNode("",!0),t.createVNode("div",ht,[t.renderSlot(e.$slots,"default",i.id)])],16)};var gt={props:{items:{type:Array},target:{type:Element}},data:()=>({blocked:!1}),methods:{async doAction(e){e&&e.action&&e.action(e)}}};const yt={class:"tw-menu"},wt={key:1,class:"-separator"};gt.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-popover");return t.openBlock(),t.createBlock(l,{target:n.target},{default:t.withCtx((()=>[t.createVNode("div",yt,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(n.items,(e=>(t.openBlock(),t.createBlock(t.Fragment,null,[e.title?(t.openBlock(),t.createBlock("a",{key:0,class:"-item",onClick:t.withModifiers((t=>a.doAction(e)),["prevent","stop"]),onContextmenu:t.withModifiers((t=>a.doAction(e)),["prevent","stop"])},t.toDisplayString(e.title),41,["onClick","onContextmenu"])):(t.openBlock(),t.createBlock("hr",wt))],64)))),256))])])),_:1},8,["target"])};let bt=t.reactive([]);var kt=t.defineComponent({setup:e=>({notifications:bt})});const xt={class:"tw-notification-container"},Bt={class:"tw-notification-title"},Ot={class:"tw-notification-message"};kt.render=function(e,o,n,r,i,a){return t.openBlock(),t.createBlock("div",xt,[t.createVNode(t.TransitionGroup,{name:"tw-notification",tag:"div"},{default:t.withCtx((()=>[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(e.notifications,(e=>(t.openBlock(),t.createBlock("div",{class:"tw-notification",key:e.id},[t.createVNode("div",Bt,t.toDisplayString(e.title),1),t.createVNode("div",Ot,t.toDisplayString(e.message),1)])))),128))])),_:1})])};let St=document.createElement("div");function Ct(e){e.id||(e.id=_e()),e.timeout||(e.timeout=5e3),e.active||(e.active=!0),e.timeout&&setTimeout((()=>{e.active=!1,function(e){let t=bt.findIndex((t=>t.id===e));t>=0&&(bt.splice(t,1),console.log("remove index",t,e))}(e.id)}),e.timeout),console.log("add id",e.id,St),bt.unshift(e)}document.body.appendChild(St),t.createApp(kt).mount(St);var Vt=!1,Nt=t.defineComponent({props:{placement:{default:"top"}},components:{twPopover:Re},setup(e){if(Vt)return void console.error("tw-tooltip-trigger can only be activated once");Vt=!0;let o=t.ref(!1),n=t.ref(e.placement),r=t.ref(),i=t.ref(""),a=0;return Ee(window,"touchdown",(e=>{o.value=!1}),true),Ee(window,"mouseover",(t=>{clearTimeout(a);let l=t.target;a=setTimeout((()=>{for(var t;null!=l&&"BODY"!==(null==l?void 0:l.tagName);){let a=l.getAttribute("tooltip");if(a&&(null==a?void 0:a.length)>0)return r.value=l,i.value=(null==(t=null==a?void 0:a.toString())?void 0:t.trim())||"",n.value=l.getAttribute("tooltip-placement")||e.placement,void(o.value=!0);l=l.parentElement}o.value=!1,r.value=null}),50)}),true),{placement:n,target:r,text:i,active:o}}});Nt.render=function(e,o,n,r,i,a){const l=t.resolveComponent("tw-popover");return t.openBlock(),t.createBlock(l,{modelValue:e.active,"onUpdate:modelValue":o[1]||(o[1]=t=>e.active=t),target:e.target,arrow:"",theme:"tooltip",placement:e.placement},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(e.text),1)])),_:1},8,["modelValue","target","placement"])};let Dt=document.createElement("div");document.body.appendChild(Dt),t.createApp(Nt).mount(Dt);const Tt=Boolean(window&&"ontouchstart"in window||((null==navigator?void 0:navigator.maxTouchPoints)||0)>1||(null==navigator?void 0:navigator.msPointerEnabled)&&(null==window?void 0:window.MSGesture)||(null==window?void 0:window.DocumentTouch)&&document instanceof DocumentTouch);function jt(e){t.onMounted((()=>{window.addEventListener("resize",e)})),t.onBeforeUnmount((()=>{window.removeEventListener("resize",e)}))}e.emitNotification=Ct,e.twButton=n,e.twCompletion=We,e.twDropdown=Xe,e.twIcon=pt,e.twInput=Ge,e.twItems=v,e.twLabel=vt,e.twList=y,e.twMenu=gt,e.twModal=s,e.twObject=Je,e.twPopover=Re,e.twTagInput=ze,e.useFocusDesktopInput=function(e){Tt||t.watch(e,(()=>{var t;return null==(t=null==e?void 0:e.value)?void 0:t.focus()}))},e.useKey=l,e.useMenu=function(e,t){return{toggleMenu(){console.log("toggle menu")}}},e.useNotification=function(e={title:"title is missing!"}){return t=>{Ct(Object.assign({},e,t))}},e.useOn=function(e,o,n,r=!1){return t.onMounted((()=>{!0===r&&n(null),e.on(o,n)})),t.onBeforeUnmount((()=>{e.off(o,n)})),()=>{e.off(o,n)}},e.useResizeInput=function(e,o){let{minSize:n=32,placeholder:r=""}=o,i=()=>{const t=e.value;let o=t.value;t.style.width="1px",""===o?(t.value=r,t.style.width=Math.max(+n,t.scrollWidth)+"px",t.value=""):t.style.width=Math.max(+n,o?t.scrollWidth:0)+"px"};jt(i),Ee(e,"input",i),t.onMounted((()=>{i()}))},e.useTextareaResize=function(e){const o=()=>{let t=e.value;t.style.height="1px",t.style.height=t.scrollHeight+2+"px"};t.onUpdated((()=>{e.value.setAttribute("style","height:"+(e.value.scrollHeight+2)+"px;overflow-y:hidden;resize:none;")})),Ee(e,"input",o),Le(e,o)},e.useTooltip=function(){return{}},e.useWindowResize=jt,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
